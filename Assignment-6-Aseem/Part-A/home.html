<!DOCTYPE html>
<html>

<head>
	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/
	4.0.0/css/bootstrap.min.css">
	<!-- jQuery library -->
	 <script src="https://ajax.googleapis.com/ajax/libs/
	jquery/3.3.1/jquery.min.js">
	</script>
	<!-- Popper JS -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/
	popper.js/1.12.9/umd/popper.min.js">
	</script>
	<!-- Latest compiled JavaScript -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/
	4.0.0/js/bootstrap.min.js">
	</script> 
</head>

<body><br>
	<h2 class="text-center text-success">
		Login to Calculator
	</h2>
	<div class="container">
		<div class="col-lg-8 m-auto d-block">
			<form method="get" action="./calculator.html">
				<div class="form-group">
					<label for="user"> Username: </label>
					<input type="text" name="username" id="usernames" placeholder="username" required class="form-control">
					<h5 id="usercheck" style="color: red;"> *Username is missing </h5>
				</div>

				<div class="form-group">
					<label for="user"> Email: </label>
					<input type="emailId" name="email" id="email" placeholder="user@northeastern.edu" required class="form-control">
                    <!-- <h5 id="emailvalid" style="color: red;">*Invalid Email address, Please enter valid Email in user@northeastern.edu</h5> -->
                    <h5 id="emailvalid" class="form-text text-muted invalid-feedback" style="display: none; color: red;">
                        Invalid Email address, Please enter valid Email in user@northeastern.edu</h5>

				</small>
               
				</div>

				<div class="form-group">
					<label for="password">Password:</label>
					<input type="password" name="pass" id="password" placeholder="password" required class="form-control">
                        <h5 id="passcheck" style="color: red;">*Please fill the password</h5>
				</div>

				<input type="submit" id="submitbtn" value="Submit" class="btn btn-primary" onclick="myFunction();login(loginform)">
				<!-- <button type="submit" id="submitbtn" onclick="myFunction();login(loginform)">Submit</button> -->
			</form>
		</div>
	</div>
	<script>
		// Document is ready
        $(document).ready(function () {
    // Validate Username
    $("#usercheck").hide();
    let usernameError = true;
    $("#usernames").keyup(function () {
        validateUsername();
    });

    function validateUsername() {
        let usernameValue = $("#usernames").val();
        if (usernameValue.length == "") {
            $("#usercheck").show();
            usernameError = false;
            return false;
        }
        else if (usernameValue.length < 3 || usernameValue.length > 10) {
            $("#usercheck").show();
            $("#usercheck").html("*Length of username must be between 3 and 10");
            usernameError = false;
            return false;
        }
        else {
            $("#usercheck").hide();
        }
    }

    // Validate Email
    const email = document.getElementById("email");
    email.addEventListener("blur", () => {
        let regex = /(\W|^)[\w.+\-]*@northeastern\.edu(\W|$)/;//a-z@north
        let s = email.value;
        if (regex.test(s)) {
            email.classList.remove("is-invalid");
            emailError = true;
        }
        else {
            email.classList.add("is-invalid");
            emailError = false;
        }
    });

    // Validate Password
    $("#passcheck").hide();
    let passwordError = true;
    $("#password").keyup(function () {
        validatePassword();
    });
    function validatePassword() {
        let passwordValue = $("#password").val();
        if (passwordValue.length == "") {
            $("#passcheck").show();
            passwordError = false;
            return false;
        }
        if (passwordValue.length < 3 || passwordValue.length > 10) {
            $("#passcheck").show();
            $("#passcheck").html(
                "*Length of your password must be between 3 and 10"
            );
            $("#passcheck").css("color", "red");
            passwordError = false;
            return false;
        }
        else {
            $("#passcheck").hide();
        }
    }

    // Validate Confirm Password
    $("#conpasscheck").hide();
    let confirmPasswordError = true;
    $("#conpassword").keyup(function () {
        validateConfirmPassword();
    });
    function validateConfirmPassword() {
        let confirmPasswordValue = $("#conpassword").val();
        let passwordValue = $("#password").val();
        if (passwordValue != confirmPasswordValue) {
            $("#conpasscheck").show();
            $("#conpasscheck").html("*Password did not match");
            $("#conpasscheck").css("color", "red");
            confirmPasswordError = false;
            return false;
        }
        else {
            $("#conpasscheck").hide();
        }
    }

    // Submit button
    $("#submitbtn").click(function () {
        validateUsername();
        validatePassword();
        validateConfirmPassword();
        validateEmail();
        if (usernameError == true && passwordError == true && confirmPasswordError == true && emailError == true) 
        {
            //return true;
            var user2=document.getElementById('usernames').value;
            sessionStorage.setItem("user2", user2);
            console.log(user2);
            location.href("./calculator.html");
        }
        else 
        {
            alert("Please enter correct details");
            return false;
        }
    });

    /*function login(loginform){
        var user2=document.getElementById('usernames').value;
        sessionStorage.setItem("user2", user2);
        console.log(user2);
      }		
      
      function myFunction() {
        location.href("\\index.html");
      }*/
});

	</script>
	</body>
</html>